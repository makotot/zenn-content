---
title: "Excess Property Checkingã¨ã¯ä½•ã‹"
emoji: "ğŸ¤”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript"]
published: true
---

## ã¯ã˜ã‚ã«

[Excess Property Checking](https://www.typescriptlang.org/docs/handbook/2/objects.html#excess-property-checks)ï¼ˆæ—¥æœ¬èªã ã¨ã€Œéå‰°ãªï¼ˆ or ä½™è¨ˆãªï¼‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒã‚§ãƒƒã‚¯ã€ã ã‚ã†ã‹ï¼Ÿï¼‰ã¨ã„ã†ã‚‚ã®ãŒä½•ã‹ã€ç†è§£ãŒæ›–æ˜§ãªã®ã§æ•´ç†ã—ã¦ã¿ã‚‹ã€‚

:::message
Playgroundã§ã®ç¢ºèªç­‰ã¯ã€ã“ã‚Œã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã®TypeScriptã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹5.0.4ã§è¡Œã£ã¦ã„ã‚‹ã€‚
:::

## Excess Property Checking

é€šå¸¸ã€[æ§‹é€ çš„ãªå‹ã‚·ã‚¹ãƒ†ãƒ ](https://typescript-jp.gitbook.io/deep-dive/getting-started/why-typescript#nastructural-type-system)ã‚’æ¡ç”¨ã™ã‚‹TypeScriptã«ãŠã„ã¦ã€å¿…é ˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã•ãˆæº€ãŸã•ã‚Œã¦ã„ã‚Œã°ãã®ä»–ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦ã¯å•é¡Œã¨ãªã‚‰ãªã„ã€‚
ãŸã ã—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’å¤‰æ•°ã¸ä»£å…¥ã™ã‚‹ã¨ãã¨é–¢æ•°ã®å¼•æ•°ã¸æ¸¡ã™ã¨ãã«é™ã£ã¦Excess Property Checkingã®å¯¾è±¡ã¨ãªã‚‹æŒ¯ã‚‹èˆã„ãŒã‚ã‚‹ã€‚

- Excess Property Checkingã®å¯¾è±¡
  - å¤‰æ•°ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’ä»£å…¥ã™ã‚‹ã¨ã
  - é–¢æ•°ã®å¼•æ•°ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã‚’æ¸¡ã™ã¨ã

[TypeScriptã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/handbook/2/objects.html#excess-property-checks)ã‹ã‚‰éƒ¨åˆ†çš„ã«å¼•ç”¨ã™ã‚‹ã¨

> ... which validates the object more thoroughly when it is created and assigned to an object type during creation.

_**ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã«å‰²ã‚Šå½“ã¦ã‚‹å‹ã‚’ã‚ˆã‚Šå¾¹åº•çš„ã«æ¤œè¨¼ã™ã‚‹ã€**_ ã¨ã„ã†ã‚ˆã†ãªæ„å‘³åˆã„ã¨æ€ã‚ã‚Œã‚‹èª¬æ˜ãŒã‚ã‚‹ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§å¤‰æ•°ã«ä»£å…¥ã™ã‚‹ã¨ãã€å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹å‹ã«å«ã¾ã‚Œã¦ã„ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã£ã¦ã„ã‚‹ã¨å‹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ï¼ˆ[Playground](https://www.typescriptlang.org/play?#code/C4TwDgpgBAqgzhATlAvFA3gKClAlgEwC4oA7AVwFsAjJAbmyggoENcAbYuYRXEgc3oBfTAGMA9iS5QyCRAEFi8JKgwMCxAIwAaBk1YcoAIhlIAtMwACe9gDpm+fIghw4hnThLMKEYoblvMQSA)ï¼‰

```typescript
type User = {
  id: number;
  email: string;
};
const userA: User = {
  id: 1,
  email: "user-a@email.address",
  name: "A",
  // â†‘ å‹ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
  // Type '{ id: number; email: string; name: string; }' is not assignable to type 'User'.
  //  Object literal may only specify known properties, and 'name' does not exist in type 'User'.(2322)
};
```

ä¸€æ–¹ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ•°ã«ä»£å…¥ã—ã¦ã‹ã‚‰åˆ¥ã®å¤‰æ•°ã«ä»£å…¥ã™ã‚‹å ´åˆã€å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæº€ãŸã•ã‚Œã¦ã„ã‚Œã°ã‚¨ãƒ©ãƒ¼ã¨ã¯ãªã‚‰ãšæ§‹é€ çš„ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã®é€šå¸¸ã®æŒ¯ã‚‹èˆã„ã¨ãªã‚‹ã€‚ï¼ˆ[Playground](https://www.typescriptlang.org/play?#code/C4TwDgpgBAqgzhATlAvFA3gKClAlgEwC4oA7AVwFsAjJAbmyggoENcAbYuYRXEgc3oBfTAGMA9iS5QyCRAEFUGBgWIBGADQMmrDlABEMpAFpmAAW3sAdM3z5EEOHD2acJZhQjE9c55mHjJYCgRMkR7EmB4JGIo5DRDeVogA)ï¼‰

```typescript
type User = {
  id: number;
  email: string;
};
const userA = {
  id: 1,
  email: "user-a@email.address",
  name: "A",
};
const currentUser: User = userA;
// â†‘ OK
```

æ§‹é€ çš„ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ãƒã‚§ãƒƒã‚¯ã•ã‚Œãªã„éƒ¨åˆ†ã‚’Excess Property Checkingã«ã‚ˆã£ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã«ã¤ã„ã¦ã€[Effective TypeScript](https://amzn.to/3HIrQN6)ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«

> Recognizing excess property checking as a distinct process will help you build a cleaner mental model of TypeScript's type system.
>
> \- _**Item 11: Recognize the Limits of Excess Property Checking**_ \-

_**ã€Œåˆ¥å€‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦èªè­˜ã™ã‚‹ã“ã¨ã§TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹ã‚ˆã‚Šã‚¯ãƒªãƒ¼ãƒ³ãªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹åŠ©ã‘ã«ãªã‚‹ã€‚ã€**_ ã¨ã„ã†ã‚ˆã†ãªè¡¨ç¾ã‚’ã—ã¦ã„ã‚‹ã€‚

### ãªãœã“ã®ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã‹

[Be mindful of TypeScriptâ€™s Excess Property Checking Â· denhox.com - Denat Hoxha](https://www.denhox.com/posts/be-mindful-of-typescripts-excess-property-checking/#why-does-this-feature-exist)ã«ã‚ˆã‚‹ã¨ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®èª¤ã‚Šã‚’é˜²æ­¢ã™ã‚‹ã“ã¨ãŒç›®çš„ã¨ã„ã†ã€‚

> This feature exists to protect us from errors that could result from entering wrong property names:

[TypeScriptã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/handbook/2/objects.html#excess-property-checks)ã«ã‚ã‚‹ä¾‹ã‚’[å°‘ã—å¤‰æ›´ã—ãŸä¾‹](https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgMoEcCucoQMID2IMwA5sgN4BQyyCBANgVAPwBcyAzmFKKQNw1kAd2AATMAAt2yEJgC2AI2iCAvlSoxMIBGGBE6uOJAzZcACnrEyHUznxESpAJQcKdRsw7deIAcns4DjklaGRVSiFcMEwoEEjaWnomKA4rJwA6ZOZkAB9c5AAiXDFCgBohWkC0xzIM0QlJZBYPa1J68SlkACpWzIaujgAmAAYK2lU1DQYIMGRFBkwIO1xkAF5DCGNlrHtzd2zYjkKFpfKRTskOAEYRkfDnfiA)ã‚’ç”¨æ„ã™ã‚‹ã¨ã€

```typescript
interface SquareConfig {
  color?: string;
  width?: number;
}

function createSquare(config: SquareConfig): { color: string; area: number } {
  return {
    color: config.color || "red",
    area: config.width ? config.width * config.width : 20,
  };
}

let blueSquare = createSquare({ colour: "blue", width: 100 });
```

`createSquare({ colour: "blue", width: 100 })`ã®`colour`ã¯èª¤ã£ã¦ã‚¿ã‚¤ãƒã—ã¦ã„ã¦`createSquare`é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦`color`ãŒæ¸¡ã‚‰ãªã„ã€‚ãªã®ã§ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸Šã§ã¯æ„å›³ã—ãªã„æŒ¯ã‚‹èˆã„ã«ãªã‚‹ï¼ˆ`blue`ã‚’è¿”ã•ã‚Œã‚‹ã¯ãšã ã‘ã©ã€å®Ÿéš›ã«ã¯`red`ãŒè¿”ã•ã‚Œã‚‹ï¼‰ã¨ã„ã†ã“ã¨ãŒã€æ§‹é€ çš„å‹ã‚·ã‚¹ãƒ†ãƒ ã ã‘ã§ã‚ã‚Œã°èµ·ã“ã‚Šå¾—ã‚‹ã¨æ€ã†ã‘ã©ã€TypeScriptã§ã¯ã“ã‚Œã‚’Excess Property Checkingã§ä¸€å®šã®æ¡ä»¶ä¸‹ã«ãŠã„ã¦é˜²ã’ã‚‹ã¨ã„ã†ã“ã¨ã ã¨æ€ã†ã€‚

## å‚è€ƒ

- [TypeScript: Documentation - Object Types](https://www.typescriptlang.org/docs/handbook/2/objects.html#excess-property-checks)
- [Be mindful of TypeScriptâ€™s Excess Property Checking Â· denhox.com - Denat Hoxha](https://www.denhox.com/posts/be-mindful-of-typescripts-excess-property-checking/)
- [ãªãœTypeScriptã‚’ä½¿ã†ã®ã‹ï¼Ÿ - TypeScript Deep Dive æ—¥æœ¬èªç‰ˆ](https://typescript-jp.gitbook.io/deep-dive/getting-started/why-typescript#nastructural-type-system)
- [Effective TypeScript](https://effectivetypescript.com/)
