---
title: "MUIに入門する"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ['mui']
published: false
---

MUIに入門する。
公式ドキュメントなどを読みながら理解を深めて、MUIを利用する場合にスムーズに実装を進められるようにしたり避けるべきことなどをある程度認識できるようになることが目的。

https://mui.com/

## 全体の構成

プロダクトが複数存在したり[material-uiからMUIに名称変更したり](https://mui.com/blog/material-ui-is-now-mui/)パッケージ構成変更したりと、全体の構成を整理しないと混乱してしまうのでまずはそこから確認する。

### プロダクト

MUIが公式サイトでプロダクトとして扱っているのが以下のものだと思われる。

| プロダクト                                           | 概要                                                                                       |
| ----------------------------------------------- | ---------------------------------------------------------------------------------------- |
| [MUI Core](https://mui.com/core/)               | ReactのUIコンポーネントライブラリ。MITライセンス。                                                           |
| [MUI X](https://mui.com/x/)                     | 複雑なユースケースに対応するUIコンポーネントのコレクション。MITライセンスのコンポーネントと有料ライセンスのコンポーネントがある。                      |
| [MUI Templates](https://mui.com/templates/)     | MUIで作られたテンプレート。[Store](https://mui.com/store/)でさまざまなテンプレートを確認できる。無料のテンプレートと有料のテンプレートがある。 |
| [MUI Design kits](https://mui.com/design-kits/) | デザインツール向けのMUIのキット。                                                                       |

`MUI Core`というとnpmパッケージの[`@mui/core`](https://www.npmjs.com/package/@mui/core)（今は[`@mui/base`](https://www.npmjs.com/package/@mui/base)）と混合してしまいそうだけど、`MUI Core`はMUI全体でのプロダクトとしてみたときのコアな製品群にあたるという意味での`MUI Core`。
`@mui/base`は、この`MUI Core`プロダクトの名称との差別化のために投票などから決定したもののよう。

https://twitter.com/michaldudak/status/1452630484706635779

### パッケージ

`@mui/***`のnpmパッケージが複数存在するけども、それぞれどのようなパッケージなのかを整理。

| npmパッケージ                                                       | 概要                                                                                                                 |
| -------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| [`@mui/material`](https://www.npmjs.com/package/@mui/material) | [マテリアルデザイン](https://material.io/design)で装飾されているコンポーネントライブラリ。`@mui/base`と`@mui/system`は依存ライブラリとして含まれる。「Material UI」というワードが差すのはこのパッケージのことと考えて良さそう。 |
| `@mui/base`                                                    | 装飾を持たないコンポーネントライブラリ。                                                                                    |
| `@mui/system`                                                  | CSSのユーティリティのコレクションで、`sx`propやテーマに対応したコンポーネントの作成を容易にすることがこのパッケージによって実現される。                                          |
| `@mui/styled-engine`                                           | `@mui/system`のデフォルトのスタイリングエンジン。emotionのAPIのラッパー。                                                                   |
| `@mui/styled-engine-sc`                                        | `@mui/system`のスタイリングエンジン。styled-componentsのAPIのラッパー。                                                               |
| `@mui/styles`                                                  | v5では非推奨の古いスタイリングエンジン。                                                                                              |
| `@mui/icons-material`                                          | [Material Icons](https://fonts.google.com/icons?icon.set=Material+Icons)をSVGアイコンのコンポーネントとして提供するもの。                 |
| `@mui/codemod`                                                 | MUIのcodemodスクリプト。                                                                                                  |
| `@mui/joy`                                                     | `@mui/material`と同じコンポーネントをマテリアルデザインではないもので提供するコンポーネントライブラリ。開発中。 |
| `@mui/x-data-grid`                                             | データをテーブル表示するコンポーネント。MUI XのMITライセンスのコンポーネント。                                                                        |
| `@mui/x-date-pickers`                                          | date pickerコンポーネント。MUI XのMITライセンスのコンポーネント。                                                                         |

全てのパッケージをリストアップしているわけではない。商用ライセンスのパッケージなどは除く。

https://mui.com/material-ui/guides/understand-mui-packages/
https://mui.com/x/advanced-components/

## Material UI

上述の通りMaterial UIが指すのは、マテリアルデザインで装飾されているコンポーネントライブラリである`@mui/material`のことのはず。自らスタイリングせずともすでに用意されているコンポーネントを利用することでUIを作成できる。

Material UIが[マテリアルデザイン v3](https://m3.material.io/)に対応するのはv6以降の予定になっている。

https://github.com/mui/material-ui/issues/29345

### あらためてマテリアルデザインとは？

> Material is a design system created by Google to help teams build high-quality digital experiences for Android, iOS, Flutter, and the web.
> https://material.io/design/introduction

https://material.io/design/introduction

Googleのプロダクトにおいてプラットフォームを問わずに一貫したUIを提供するためのデザインシステムと考えれば良さそう。

Wikipediaから引用する。

> Googleは2014年6月にGoogle I/O conferenceにおいて、新しいユーザーエクスペリエンス設計体系として「マテリアルデザイン」を発表した。マテリアルデザインは、ユーザーが接する画面にマテリアル（物質）、メタファーの概念を用いて一貫性のある世界をつくりつつ、ユーザーの操作を補助するものである。
> 
> スマートフォンやタブレットなどの様々なデバイスにおいて、マテリアルデザインによる統一感のあるデザインを取り入れることにより、操作するデバイスが変わっても操作感に統一性を期待できることで、ユーザーはストレスを感じずに様々なデバイスを操作することができる。
> 
> この設計体系は、デザインを簡略化するフラットデザインに、他の物質の質感に近づけるために装飾を施すスキューモーフィズムを取り入れた「フラット2.0」の一例として取り上げられることがある。
> 
> https://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3

### インストール

デフォルトのスタイリングエンジンは[emotion](https://emotion.sh/docs/introduction)になっている。
スタイリングエンジンとしてデフォルトのemotionのままでインストールする場合は、以下のようにしてインストールする。

```sh
$ npm install @mui/material @emotion/react @emotion/styled
```

スタイリングエンジンとして[styled-components](https://styled-components.com/)を採用する場合は、以下のようにしてインストールする。

```sh
$ npm install @mui/material @mui/styled-engine-sc styled-components
```

なお、Material UI v5からはreact v17.0.0およびreact-dom v17.0.0が`peerDependencies`となった。

[Roboto](https://fonts.google.com/specimen/Roboto)フォントを使用することを意識してデザインされているけども、Robotoフォントは自動的に読み込まれるわけではない。

`Icon`コンポーネントを利用する場合、[Material Icons](https://fonts.google.com/icons?icon.set=Material+Icons)を読み込む必要がある。
SVGのアイコンを利用する場合には、`@mui/icons-material`を個別にインストールする必要がある。

Material UIの各コンポーネントはそれぞれ独立したコンポーネントとして成り立つものになっている。例えば`import Button from '@mui/material/Button'`とすればMaterial UIの`Button`コンポーネントをすぐさま利用できる。

MUI自体はモバイルファーストのアプローチをとっている。

normalize.cssやreset.cssを必須としていないけども、オプショナルな形でそれに相当するコンポーネントとして[`<CssBaseline />`](https://mui.com/material-ui/react-css-baseline/)というものがある。

### Component

利用可能なコンポーネントはどのようなものがあるか。
マテリアルデザインのコンポーネントとそれに対応するMUIのコンポーネントについては以下のページにまとまっている。

https://mui.com/material-ui/getting-started/supported-components/


#### [`<Box />`](https://mui.com/material-ui/api/box/)

最も自由度が高いというか抽象度の高いコンポーネント。`@mui/system`が提供する全ての[`system`プロパティ](https://mui.com/system/properties/)が利用可能なコンポーネント。

#### [`<Button />`](https://mui.com/material-ui/api/button/)

ボタンコンポーネント。テキストのみかもしくはアイコンとテキストの組み合わせのボタンに利用するものだと思う。
デフォルトは[Text Button](https://material.io/components/buttons#text-button)。

#### [`<Divider />`](https://mui.com/material-ui/react-divider/)

明確な境界を視覚的に示す仕切りとなるコンポーネント。デフォルトは水平線。`orientation="vertical"`で垂直線にもできる。また、`children`は線上に表示される。

#### [`<Grid />`](https://mui.com/material-ui/react-grid/)

CSSにおける[`grid`](https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Grid_Layout)ではなくて、[マテリアルデザインにおける12カラムのグリッドレイアウトのレスポンシブUI](https://material.io/design/layout/responsive-layout-grid.html)のグリッドとしての`Grid`コンポーネント。実態としては[Flexbox](https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox)。

以下のissueでこのことについて話がされていて、今後`grid`による実装に変更されたり今の`Grid`コンポーネントが`Flex`コンポーネントになったりする可能性はあると思う。
https://github.com/mui/material-ui/issues/9513

#### [`<Stack />`](https://mui.com/material-ui/react-stack/)

子要素間のスペースと仕切りでのレイアウトをおこなうためのコンポーネント。`Box`などと同じように全ての[`system`プロパティ](https://mui.com/system/properties/)が利用可能なコンポーネント。

なお、今のところ`Spacer`コンポーネントは提供されていない。意見は募っているけど`Stack`で代替できるので、特に要望が増えない限りは対応されなそう。
https://github.com/mui/material-ui/issues/30506

#### [`<Typography />`](https://mui.com/material-ui/api/typography/)

見やすく読みやすいUIを提供するために、レイアウトとの兼ね合いを考慮したタイポグラフィのスケールに限定されたコンポーネント。

https://material.io/design/typography/#type-scale

全ての[`system`プロパティ](https://mui.com/system/properties/)が利用可能なコンポーネント。

### Theme

一貫したトーンを保つ上でデザイン上のカスタマイズはThemeで行う。これはオプショナルなもので、何も指定しなければデフォルトのThemeが利用される。
なお、ライトとダークがあって、デフォルトで選択されるのはライト。
デフォルトのThemeの内容は以下のページで確認できる。

https://mui.com/material-ui/customization/default-theme/

独自の値を追加することも可能。

Themeをカスタマイズする場合は[`ThemeProvider`](https://mui.com/material-ui/customization/theming/#themeprovider)を利用する。
`ThemeProvider`はネストすると、上位の`ThemeProvider`のThemeを上書きする形になるけど、`theme`propに渡す値を上位の`ThemeProvider`に渡しているそれとマージすれば拡張した形でも利用できる。

MUI公式ドキュメントのページはデフォルトのThemeではなくてカスタマイズしたもの。公式ドキュメントで使われているThemeは`theme`オブジェクトとしてグローバル変数が参照できるようになっているので、devtoolsで確認できる。

https://mui.com/material-ui/customization/theming/

#### `theme.palette`

コンポーネントの色合い。

- `theme.palette.primary`: プライマリカラー。最も優先順位の高いもののような理解で良いはず。
- `theme.palette.secondary`: セカンダリカラー。アクセントカラーなどで使われる。
- `theme.palette.error`: エラーを示す色に使われる。
- `theme.palette.warning`: 警告を示す色に使われる。
- `theme.palette.info`: 通常の情報を示す色に使われる。
- `theme.palette.success`: 正常に完了したことを示す色に使われる。

`primary`と`secondary`のイメージは、以下のマテリアルデザインのカラーパレットのツールで確認するのが良いのかもしれない。

https://material.io/resources/color/#!/

それぞれ1つの色の値ではなくて以下の型になる。

```ts
interface PaletteColor {
  light?: string; // 省略した場合、theme.palette.tonalOffset と main の値から算出される
  main: string;
  dark?: string; // 省略した場合、theme.palette.tonalOffset と main の値から算出される
  contrastText?: string; // 省略した場合、theme.palette.contrastThreshold と main の値から算出される
}
```

#### ダークモード

ユーザの設定に関係なく`theme.palette.mode`を`dark`にすることでダークモードをデフォルトにできる。
`useMediaQuery`を利用することでユーザの設定に従ったダークモード対応が可能でもある。
@[codesandbox](https://codesandbox.io/embed/prefers-color-scheme-6rm1tx?fontsize=12&hidenavigation=1&theme=dark)

https://mui.com/material-ui/customization/dark-mode/

#### `theme.typography`

アクセシビリティを考慮してMUIではフォントサイズの単位に`rem`を使う。

`html`要素自体のフォントサイズは通常`16px`だけどこれを意図して変更したい場合、`theme.typography.htmlFontSize`に値を指定することで可能（合わせて`html`要素にCSSで`font-size`の指定を行うことも必要）。

## Joy UI

## MUI Base

## MUI System

---

- https://material.io/
