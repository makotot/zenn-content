---
title: "TypeScriptã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®èª­ã¿æ–¹ã«ã¤ã„ã¦"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript"]
published: true
---

TypeScriptã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€å‹ãŒè¤‡é›‘ã«ãªã‚Œã°ãªã‚‹ã»ã©ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«ãã®ç†è§£ã‚’é›£ã—ãã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãªã‚‹å‚¾å‘ãŒã‚ã‚‹ã¨æ€ã†ã‘ã©ã€ã©ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã‚€ã¨ç†è§£ãŒæ—ã‚‹ã®ã‹ç¢ºèªã™ã‚‹ãƒ¡ãƒ¢ã€‚

:::message
ã“ã“ã§ã®TypeScriptã¯5.1.3ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ãŸã‚‚ã®ã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯`tsc`ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚‚ã®ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚
:::

## ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå‹ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚‹[TypeScriptã®ã‚³ãƒ¼ãƒ‰](https://www.typescriptlang.org/play?ts=5.1.3#code/C4TwDgpgBAYgrgOwMZQLxQBQEo0D4oDeAUFFAGYD2FAXISaVAEYCGATrQM7CsCWCA5vVIsAXrQRwAtowit6AXyKKkFBF3KIkteMjSYcqfMVKsIwOKwR0G5KrWM2mbWgHIurFwBohDUbW5wEN428sFQivJAA)ãŒã‚ã£ãŸå ´åˆã€

```typescript
type Func = () => {
  foo: {
    bar: string;
    baz: number;
  };
};
const func: Func = () => {
  return {
    foo: {
      bar: "baz",
      baz: true, // <- numberã§ã¯ãªã„ã®ã§å‹ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹
    },
  };
};
```

TypeScriptã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã§ã€

<!-- dprint-ignore-start -->

```
TS2322: Type '() => { foo: { bar: string; baz: boolean; }; }' is not assignable to type 'Func'.
  Call signature return types '{ foo: { bar: string; baz: boolean; }; }' and '{ foo: { bar: string; baz: number; }; }' are incompatible.
    The types of 'foo.baz' are incompatible between these types.
      Type 'boolean' is not assignable to type 'number'.
```

<!-- dprint-ignore-end -->

4è¡Œã«æ¸¡ã£ã¦ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‘ã©ã‚‚ã€1è¡Œãšã¤ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒæ·±ããªã£ã¦ã„ã‚‹ã€‚ã¾ãŸã€1è¡Œç›®ã®å…ˆé ­ã«ã¯`TS2322`ã¨ã„ã†ç•ªå·ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚
VSCodeã®ã‚ˆã†ãªã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ä¸Šã§ã¯å¤‰æ•°`func`ã«ä¸‹ç·šãŒå¼•ã‹ã‚Œã¦ã€å®Ÿéš›ã«å•é¡ŒãŒã‚ã‚‹ç®‡æ‰€ï¼ˆ`foo.baz`ï¼‰ã‚’æŠŠæ¡ã™ã‚‹åŠ©ã‘ã¨ã¯ãªã‚Šã«ãã„ã€‚
ä»Šå›ã®ä¾‹ã¯è©²å½“ã—ãªã„ã‘ã©ã‚‚ã€å ´åˆã«ã‚ˆã£ã¦ã¯`{ ...; }`ã®ã‚ˆã†ãªå½¢ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å…¨æ–‡ãŒè¡¨ç¤ºã•ã‚Œãšã«çœç•¥ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã€‚

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ§‹æˆ

ã“ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ãŒã©ã®ã‚ˆã†ã«æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã®ã‹ã€‚
[TypeScript: Documentation - Understanding Errors](https://www.typescriptlang.org/docs/handbook/2/understanding-errors.html)ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ãŒã‚ã‚Šã€

> Each error starts with a leading message, sometimes followed by more sub-messages. You can think of each sub-message as answering a â€œwhy?â€ question about the message above it. Letâ€™s work through some examples to see how they work in practice.

å…ˆé ­ã®1è¡Œã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰å§‹ã¾ã‚Šã€ãã‚Œä»¥é™ã®ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å„è¡Œã§ã¯å‰è¡Œã®ã€Œãªãœï¼Ÿã€ã‚’èª¬æ˜ã™ã‚‹å†…å®¹ã¨ãªã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚ä¸Šè¿°ã®ä¾‹ã§ã‚ã‚Œã°:ã€

1. `() => { foo: { bar: string; baz: boolean; }; }`ã¨ãªã‚‹å€¤ã‚’`Func`å‹ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„

```
TS2322: Type '() => { foo: { bar: string; baz: boolean; }; }' is not assignable to type 'Func'.
```

2. `Func`å‹ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„ã®ã¯ãªãœã‹ã€‚ãã‚Œã¯ã€é–¢æ•°ã®è¿”ã‚Šå€¤ã®å‹ã¨Call signatureã®è¿”ã‚Šå€¤ã®å‹ãŒä¸€è‡´ã—ãªã„ã‹ã‚‰ã€‚

<!-- dprint-ignore-start -->

```
  Call signature return types '{ foo: { bar: string; baz: boolean; }; }' and '{ foo: { bar: string; baz: number; }; }' are incompatible.
```

<!-- dprint-ignore-end -->

3. é–¢æ•°ã®è¿”ã‚Šå€¤ã®å‹ã¨Call signatureã®è¿”ã‚Šå€¤ã®å‹ãŒä¸€è‡´ã—ãªã„ã®ã¯ãªãœã‹ã€‚ãã‚Œã¯ã€ãã‚Œãã‚Œã®`foo.baz`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ãŒä¸€è‡´ã—ãªã„ã‹ã‚‰ã€‚

<!-- dprint-ignore-start -->

```
    The types of 'foo.baz' are incompatible between these types.
```

<!-- dprint-ignore-end -->

4. ãã‚Œãã‚Œã®`foo.baz`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ãŒä¸€è‡´ã—ãªã„ã®ã¯ã¯ãœã‹ã€‚`number`å‹ã¸`boolean`å‹ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„ã‹ã‚‰ã€‚

<!-- dprint-ignore-start -->

```
      Type 'boolean' is not assignable to type 'number'.(2322)
```

<!-- dprint-ignore-end -->

ã¨ã„ã†ã‚ˆã†ã«ã€1ã¤ãšã¤ã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã‚’æ˜ã‚Šä¸‹ã’ã¦ã„ãå½¢ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

ãªãŠã€`2322`ã¯ã€ã‚¨ãƒ©ãƒ¼ã®è¨ºæ–­ã‚³ãƒ¼ãƒ‰ã«ã‚ãŸã‚‹ã€‚[Coding guidelines Â· microsoft/TypeScript Wiki Â· GitHub](https://github.com/microsoft/TypeScript/wiki/Coding-guidelines#diagnostic-message-codes)ã«1000ç•ªå°ã‹ã‚‰7000ç•ªå°ã¾ã§ã¯ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®èª¬æ˜ãŒã‚ã‚‹ã€‚
2000ç•ªå°ã¯ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãªã‚‚ã®ã§ã‚ã‚Šã€ä¸Šè¿°ã®å‹ãŒå‰²ã‚Šå½“ã¦ã§ããªã„`2322`ã®ã‚±ãƒ¼ã‚¹ãªã©æ§‹æ–‡çš„ã«ã¯å•é¡Œãªã„ã‘ã©ã‚‚å‹ã¨ã—ã¦ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚‚ã®ãŒå¤šã„ã¨æ€ã‚ã‚Œã‚‹ã€‚

:::message
ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®Ÿä½“ã«ã‚ãŸã‚‹[`diagnosticMessages.json`](https://github.com/microsoft/TypeScript/blob/5021dd87ef36e87bae39cbb5a30dabd295410920/src/compiler/diagnosticMessages.json)ã®æ–¹ã«ã¯7000ç•ªå°ä»¥ä¸Šã‚‚8000ç•ªå°ã‚„9000ç•ªå°ãªã©ã‚‚å­˜åœ¨ã™ã‚‹ã‘ã©ã€ãã®èª¬æ˜ãŒè¶³ã‚Šã¦ãªã„éƒ¨åˆ†ã«ã¤ã„ã¦ã¯TypeScriptã®Wikiã®ãƒªãƒã‚¸ãƒˆãƒªã§[Issue](https://github.com/microsoft/TypeScript-wiki/issues/307)ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã€‚
:::

## ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç†è§£ã—ã‚„ã™ãã™ã‚‹ã«ã¯ï¼Ÿ

[Structure of a TypeScript Error | Total TypeScript](https://www.totaltypescript.com/structure-of-a-typescript-error)ã«ã‚ˆã‚Œã°ã€é–¢æ•°è‡ªä½“ã®å‹ã‚’Call signatureã§å‹å®šç¾©ã™ã‚‹ã®ã§ã¯ãªãã€è¿”ã‚Šå€¤ã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç­‰ã‚’ãã‚Œãã‚Œå€‹åˆ¥ã«å‹å®šç¾©ã™ã‚‹ã®ãŒã€ã‚ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™è¦³ç‚¹ã§ã¯è‰¯ã•ãã†ã€‚

> Objects are less complex than functions (they can't be overloaded), so TypeScript can actually dispense with a long error and show only the line that matters:
> ...
> So, if you're looking to improve your TypeScript errors - aim to always compare **objects to objects**, instead of **functions to functions**. This means you should prefer typing return types and parameters over giving a type to the function itself.

ä¾‹ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹[TypeScriptã®ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿”ã‚Šå€¤ã®å‹å®šç¾©ã«å¤‰ãˆã‚‹](https://www.typescriptlang.org/play?ts=5.1.3#code/C4TwDgpgBAYgrgOwMYCULDgJwQFXNAXigG8AoKKAMwHtqAuE8iqAIwENMGBnYTASwQBzJhXYAvBgjgBbFhExMAvqWVJqCHlURIoRABQBKBvGRoM2PJF0A+RhUzosCO8xr0XzVhwYByHph8AGhFmcQZeOAhgz0VoqGVFIA)ã¨

```typescript
type FuncReturnType = {
  foo: {
    bar: string;
    baz: number;
  };
};
const func = (): FuncReturnType => {
  return {
    foo: {
      bar: "str",
      baz: true,
    },
  };
};
```

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®1æ–‡ã®ã¿ã«å¤‰åŒ–ã—ã¦ã€VScodeã®ã‚ˆã†ãªã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ä¸Šã§ã¯`foo.baz`ã®ç®‡æ‰€ã«ä¸‹ç·šãŒå¼•ã‹ã‚Œã‚‹ã®ã§ã€ã©ã“ã«å•é¡ŒãŒã‚ã‚‹ã®ã‹ä¸€ç›®ã§æŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

```
TS2322: Type 'boolean' is not assignable to type 'number'.
```

### VSCodeã®æ‹¡å¼µæ©Ÿèƒ½

VSCodeã§ã‚ã‚Œã°ã€äººé–“ãŒèª­ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã™ã‚‹æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦[pretty-ts-errors](https://github.com/yoavbls/pretty-ts-errors)ãŒã‚ã‚‹ã€‚

https://twitter.com/t3dotgg/status/1647759462709747713?cxt=HHwWgoDToYmggt4tAAAA

ã“ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã€[TypeScript Error Translator](https://ts-error-translator.vercel.app/)ã«ã‚ˆã£ã¦å¹³æ˜“ãªè‹±èªã§ã‚¨ãƒ©ãƒ¼ã‚’èª¬æ˜ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã‚’æŒã¤ã€‚è‹±èªä»¥å¤–ã®è¨€èªã¸ã®å¯¾å¿œã«ã¤ã„ã¦ã¯[Support more languages and locales Â· Issue #27 Â· yoavbls/pretty-ts-errors](https://github.com/yoavbls/pretty-ts-errors/issues/27)ã‚’ã‚¦ã‚©ãƒƒãƒã—ã¦ãŠãã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚

## å‚è€ƒ

- [TypeScript: Documentation - Understanding Errors](https://www.typescriptlang.org/docs/handbook/2/understanding-errors.html)
- [Structure of a TypeScript Error | Total TypeScript](https://www.totaltypescript.com/structure-of-a-typescript-error)
- [How to read TypeScript errors](https://hipsterbrown.com/musings/musing/read-typescript-errors)
- [Deciphering TypeScriptâ€™s React errors | by Fiona Hopkins | Innovation and Technology | Medium](https://medium.com/innovation-and-technology/deciphering-typescripts-react-errors-8704cc9ef402)
- [Interpreting Errors - TypeScript Deep Dive](https://basarat.gitbook.io/typescript/main/interpreting-errors)
- [react native - How to read typescript error in order to understand what type should be used? - Stack Overflow](https://stackoverflow.com/questions/71788305/how-to-read-typescript-error-in-order-to-understand-what-type-should-be-used)
- [Coding guidelines Â· microsoft/TypeScript Wiki](https://github.com/microsoft/TypeScript/wiki/Coding-guidelines#diagnostic-message-codes)
- [typescript - Difference between call signature and function type - Stack Overflow](https://stackoverflow.com/questions/32043487/difference-between-call-signature-and-function-type)
