---
title: "i18n/l10n ã‚’æ•´ç†ã™ã‚‹"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["i18n", "l10n"]
published: false
---

ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¤šè¨€èªå¯¾å¿œã‚’ã©ã®ã‚ˆã†ã«è¡Œã†ã‹ã€i18nï¼ˆinternationalizationï¼‰ãŠã‚ˆã³l10nï¼ˆlocalizationï¼‰ã«ã¤ã„ã¦æ•´ç†ã—ã¦è€ƒãˆã‚‹ã€‚

## i18nã€l10nã¨ã¯ä½•ã‹

ãã‚‚ãã‚‚i18nã¨l10nã€ãã‚Œãã‚Œã®æ„å‘³ã™ã‚‹ã‚‚ã®ã¯ä½•ãªã®ã‹ã€‚å¤§é›‘æŠŠã«ç†è§£ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªç†è§£ã§è‰¯ã•ãã†ã€‚

- **i18n**: å¤šè¨€èªå¯¾å¿œãŒå¯èƒ½ãªçŠ¶æ…‹ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã£ã¦ãŠãã“ã¨
- **l10n**: ç‰¹å®šã®è¨€èªï¼ˆã«åŠ ãˆã¦åœ°åŸŸçš„ãªç‰¹æ€§ãªã©ï¼‰ã«å‘ã‘ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ©Ÿèƒ½ã‚„æ–‡è¨€ã‚’é©åˆã•ã›ã‚‹ã“ã¨

ä»¥ä¸‹ã¯Wikipediaã‹ã‚‰ã®å¼•ç”¨ã€‚

#### i18nã¨ã¯

> ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«æ©Ÿèƒ½çš„ãªå¤‰æ›´ã‚„æ‹¡å¼µã‚’åŠ ãˆã‚‹ã“ã¨ãªãå¤šæ§˜ãªè¨€èªã‚„åœ°åŸŸã«é©åˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨­è¨ˆã®å·¥ç¨‹ã€‚è¨€èªã‚„åœ°åŸŸã«ä¾å­˜ã—ãªã„ã€ä»•æ§˜ã®æ±ç”¨åŒ–ã‚„å…±é€šåŒ–ã‚’å«ã‚€ã€‚
> https://ja.wikipedia.org/wiki/%E5%9B%BD%E9%9A%9B%E5%8C%96%E3%81%A8%E5%9C%B0%E5%9F%9F%E5%8C%96

#### l10nã¨ã¯

> ç‰¹å®šã®è¨€èªã¾ãŸã¯åœ°åŸŸå›ºæœ‰ã®æ–‡åŒ–ã«å¿œã˜ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆæ§‹æˆéƒ¨å“ï¼‰ã‚„æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ãŸã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸­ã®æ–‡è¨€ã‚’ç¿»è¨³ã—ãŸã‚Šã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ç‰¹å®šã®è¨€èªã‚„åœ°åŸŸã«é©åˆã•ã›ã‚‹å·¥ç¨‹ã€‚
> å¤–æ¥èªã¨ã—ã¦ã€Œãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã€ã€Œãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã€ã¨ã‚«ãƒŠè¡¨è¨˜ã•ã‚Œã‚‹ã“ã¨ã®ã»ã†ãŒå¤šã„ã€‚
> https://ja.wikipedia.org/wiki/%E5%9B%BD%E9%9A%9B%E5%8C%96%E3%81%A8%E5%9C%B0%E5%9F%9F%E5%8C%96

ãªãŠã€g11nã¯i18nãŠã‚ˆã³l10nï¼ˆglobalizationï¼‰ã®ç·ç§°ã¨ãªã‚‹ã‚‚ã®ã€‚

> å›½éš›åŒ–ã¨åœ°åŸŸåŒ–ä¸¡è€…ã®æ¦‚å¿µã¯æ™‚ã€…ã€é›†åˆçš„ã«ã‚°ãƒ­ãƒ¼ãƒãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã¾ãŸã¯ã‚°ãƒ­ãƒ¼ãƒãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¢ãƒ¡ãƒªã‚«è‹±èª: globalizationã€ã‚¤ã‚®ãƒªã‚¹è‹±èª: globalisationã€G11Nï¼‰ã¨å‘¼ã°ã‚Œã‚‹[æ³¨é‡ˆ 1]ã€‚ãŸã ã—ã€ã“ã®è¨€è‘‰ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å·¥å­¦ã®ç¯„å›²ã‚’è¶Šãˆã¦ç¤¾ä¼šçš„ãªå›½éš›åŒ–ã®æ„å‘³ã§ä½¿ã‚ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„ã€‚
> https://ja.wikipedia.org/wiki/%E5%9B%BD%E9%9A%9B%E5%8C%96%E3%81%A8%E5%9C%B0%E5%9F%9F%E5%8C%96

## HTTP

ãƒ–ãƒ©ã‚¦ã‚¶ãŒ[HTTP](https://developer.mozilla.org/ja/docs/Web/HTTP/Overview)ã§ã‚„ã‚Šã¨ã‚Šã™ã‚‹è¨€èªã«é–¢ã‚ã‚‹ã‚‚ã®ã¯ã©ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã‹ã€‚

### `Accept-Language`

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ã¨ã—ã¦`Accept-Language`ãŒé€ã‚‰ã‚Œã‚‹ã€‚
æ§‹æ–‡ã¨ã—ã¦ã¯ã€`Accept-Language: è¨€èªã‚¿ã‚°(-è¨€èªåœ°åŸŸã®ã‚µãƒ–ã‚¿ã‚°oræ–‡å­—ã®ç¨®é¡;q=é‡ã¿ã¥ã‘ã®å€¤)`ã®ã‚ˆã†ãªå½¢ã«ãªã‚‹ã€‚Chromeã§ã‚ã‚Œã°`chrome://settings/languages`ã§æŒ‡å®šã™ã‚‹è¨€èªãŒã“ã®éƒ¨åˆ†ã«ã‚ãŸã‚‹ã€‚
ã“ã®ãƒ˜ãƒƒãƒ€æŒ‡å®šã¯ã‚ãã¾ã§ãã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã ã‘ã§ã‚ã£ã¦å¼·åˆ¶åŠ›ã‚’ä¼´ã†ã‚ã‘ã§ã¯ãªã„ã€‚
å®Ÿéš›ã®`Accept-Language`ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã«ãªã‚‹ã€‚

```
Accept-Language: ja
```

```
Accept-Language: ja,en-US;q=0.9,en;q=0.8
```

https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/Accept-Language

### `Content-Language`

[ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ˜ãƒƒãƒ€](https://developer.mozilla.org/ja/docs/Glossary/Entity_header)ã¨ã—ã¦ã¯`Content-Language`ãŒã‚ã‚‹ã€‚ã“ã‚Œã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã©ã®è¨€èªä½¿ç”¨è€…å‘ã‘ã§ã‚ã‚‹ã‹ã‚’ç¤ºã™ã‚‚ã®ã§ã‚ã£ã¦ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è‡ªä½“ã®è¨€èªã¨ã¯åˆ¥ã¨ã„ã†ã‚‚ã®ã«ãªã‚Šãã†ã€‚

> ãŸã¨ãˆã°ã€ãƒ‰ã‚¤ãƒ„èªã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã®ãŸã‚ã®èªå­¦ã‚³ãƒ¼ã‚¹ã®ä¸€éƒ¨ã¨ã—ã¦ã®è‹±èªãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æ–‡æ›¸ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹è¨€èªã‚’ç¤ºã™å ´åˆã¯ã€ä»£ã‚ã‚Šã« lang å±æ€§ã‚’ä½¿ç”¨ã—ã¾ã™)ã€‚
> https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/Content-Language

https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/Content-Language

## languageã¨locale

i18n/l10nã‚’è€ƒãˆã‚‹ä¸Šã§languageã¨localeã®é•ã„ã‚’æ•´ç†ã—ã¦ãŠãå¿…è¦ã‚‚ã‚ã‚Šãã†ã€‚

- **language**: ã“ã‚Œã¯ãã®ã¾ã¾è¨€èªãã®ã‚‚ã®ã¨ã—ã¦æ‰ãˆã‚Œã°ã‚ˆã„
- **locale**: ç¿»è¨³ã™ã‚‹ä¸Šã§ã€ãã®åœ°åŸŸç‰¹æœ‰ã®é€šè²¨è¨˜å·ã‚„æ—¥ä»˜ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã‚’è¡¨ã™

> The first factor, the language, is self-explanatory; this is what will actually be translated. However, there's more than meets the eye with the second factor - locale.
>
> Locale refers to regional settings such as currency symbols or date formats. One cannot simply translate a word for word without considering these additional parameters that make up an entire culture's way of life and understanding of their world around them.
>
> https://simplelocalize.io/blog/posts/language-vs-locale/

æ—¥æœ¬èªã‹ã‚‰è‹±èªã«ç¿»è¨³ã™ã‚‹ä¸Šã§ã‚‚ã€å¯¾è±¡ã®è¨€èªã ã‘ã§ã¯ãªãå¯¾è±¡ã®åœ°åŸŸçš„ãªç‰¹æ€§ã‚’è€ƒæ…®ã—ãªã‘ã‚Œã°é©åˆ‡ãªå½¢ã§l10nã¯ã§ããªã„ã¨ã„ã†ã®ã¯ã€é€šè²¨ã‚„å˜ä½ãªã©ã®é•ã„ãªã©ã‚’è€ƒãˆã‚‹ã¨ç†è§£ã§ãã‚‹ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã®è¡¨è¨˜ã¨ã—ã¦ã¯`en-US`ã‚„`ja_JP`ã®ã‚ˆã†ãª`language-locale`ã‚‚ã—ãã¯`language_locale`ã®å½¢ã§è¡¨ã™ã“ã¨ã«ãªã‚‹ã€‚

## `Intl`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl

## i18nextã‚’ç”¨ã„ãŸReactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ã“ã®åˆ†é‡ã«é–¢ã—ã¦ã€Reactã®å ´åˆ[react-i18next](https://react.i18next.com/)ã‚„[react-intl](https://formatjs.io/docs/react-intl/)ãªã©å¹¾ã¤ã‹ã®é¸æŠè‚¢ãŒã‚ã‚‹ã€‚
ã“ã“ã§ã¯ã‹ãªã‚Šåºƒãä¸€èˆ¬çš„ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã§ã‚ã‚ã†`react-i18next`ã§i18nå¯¾å¿œã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„ã—ã¦ã¿ã‚‹ã€‚

```sh
$ npx create-react-app react-app --template typescript
$ cd react-app
$ npm i -E -D react-i18next i18next
```

`react-i18next`ã¨`i18next`ã®2ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ã«ãªã‚‹ã€‚
`i18next`ãŒç¿»è¨³ã«é–¢ã™ã‚‹ã‚³ã‚¢æ©Ÿèƒ½ã‚’æŒã¡ã€`react-i18next`ãŒãã‚Œã‚’Reactã§åˆ©ç”¨ã§ãã‚‹å½¢ã«ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã¨ã„ã†ç†è§£ã€‚

https://react.i18next.com/guides/quick-start#install-needed-dependencies

### `i18n.ts`

`i18n.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`src/`ç›´ä¸‹ã«ç”¨æ„ã™ã‚‹ã€‚å†…å®¹ã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ã®ã‚‚ã®](https://react.i18next.com/guides/quick-start#configure-i18next)ã‚’å°‘ã—å¤‰æ›´ã—ã¦ä½¿ã†ã€‚
`i18n.use(initReactI18next)`ã«ã‚ˆã£ã¦`i18next`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’`react-i18next`ãŒå—ã‘å–ã‚Šã€Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãã®æ©Ÿèƒ½ã‚’åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ã¨ã„ã†ã‚‚ã®ã®ã‚ˆã†ã€‚

```ts:i18n.ts
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'

const resources = {
  en: {
    translation: {
      hello: 'Hello',
    },
  },
  ja: {
    translation: {
      hello: 'ã“ã‚“ã«ã¡ã‚',
    },
  },
}

i18n.use(initReactI18next).init({
  resources,
  lng: 'en',

  interpolation: {
    escapeValue: false,
  },
})

export default i18n
```

`index.tsx`ã§ã“ã®`i18n.ts`ã‚’`import`ã—ã¦ãŠãã€‚

```diff:index.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import './index.css'
import App from './App'
import reportWebVitals from './reportWebVitals'

+ import './i18n'

const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement)
```

`App`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§`t`é–¢æ•°ã‚’ä½¿ã£ã¦`hello`ã«è©²å½“ã™ã‚‹ã‚‚ã®ã‚’å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚

```diff:App.tsx
import React from 'react'
import logo from './logo.svg'
import './App.css'
+import { useTranslation } from 'react-i18next'

function App() {
+  const { t } = useTranslation()

  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
-        <p>
-          Edit <code>src/App.tsx</code> and save to reload.
-        </p>
+        <p>{t('hello')}</p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer">
          Learn React
        </a>
      </header>
    </div>
  )
}

export default App
```

ã“ã‚Œã§i18nå¯¾å¿œå¯èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæº–å‚™ã§ãã‚‹ã€‚

### `i18next`ã®ç¿»è¨³ã¯å†…éƒ¨çš„ã«ã©ã®ã‚ˆã†ã«è§£æ±ºã•ã‚Œã‚‹ã‹

å†…éƒ¨çš„ãªè§£æ±ºãŒã©ã®ã‚ˆã†ã«è¡Œã‚ã‚Œã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ä¸Šã§ã€æŠŠæ¡ã™ã‚‹ã¹ãé …ç›®ã¯`key`ã¨`language`ã¨`namespace`ã®3ã¤ã€‚

- **`key`**: ã‚­ãƒ¼ã¨ãã‚Œã«å¯¾å¿œã™ã‚‹å€¤ã®çµ„ã¿åˆã‚ã›ãŒã‚ã£ã¦ã€`key`ã®æŒ‡å®šã«ã‚ˆã£ã¦å¯¾å¿œã™ã‚‹å€¤ãŒå¾—ã‚‰ã‚Œã‚‹`key`ã‚’æŒ‡ã™ã€‚JSONãªã©ã®ãã‚Œã‚’ãã®ã¾ã¾ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚Œã°åŸºæœ¬çš„ã«ã¯è‰¯ã„ã¯ãšã€‚
- **`language`**: ã©ã®è¨€èªã§ã‚ã‚‹ã‹ã¨`key`ã¨ã®çµ„ã¿åˆã‚ã›ã§ç¿»è¨³çµæœã‚’è¿”ã™ãŸã‚ã®ãã®è¨€èªã‚³ãƒ¼ãƒ‰ã€‚
- **`namespace`**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã€ç‰¹å®šã®æ„å‘³ã®ã‚ã‚‹ã¾ã¨ã¾ã‚Šã§åŒºåˆ‡ã£ã¦ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã‚‚ã®ã‚’æŒ‡ã™ã€‚

ã§ã¯ã“ã‚Œã‚‰ã®è¦ç´ ã‚’ç†è§£ã—ãŸä¸Šã§ã€å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªæµã‚Œã§ç¿»è¨³ãŒè§£æ±ºã•ã‚Œã‚‹ã‹ã€‚åŸºæœ¬çš„ã«ã¯ã€`namespace`, `language`, `key`ã®çµ„ã¿åˆã‚ã›ã«ãƒãƒƒãƒã™ã‚‹`key`ã‚’åˆ©ç”¨ã™ã‚‹ãŒã€è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯é¡ä¼¼ã®`key`ã‚„`language`ã€`namespace`ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å«ã‚ã¦æ¢ç´¢ã™ã‚‹ã€‚ãã®ä¸Šã§ä½•ã‚‚è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã«ã¯æœ€çµ‚çš„ã«`key`ãã®ã‚‚ã®ã‚’è¿”ã™ã€‚

https://www.i18next.com/principles/translation-resolution

### `i18next`ã¯è¡¨ç¤ºã™ã‚‹ã¹ãè¨€èªã‚’ã©ã®ã‚ˆã†ã«æ±ºå®šã™ã‚‹ã‹

`lng`ã«æŒ‡å®šã™ã‚‹è¨€èªãŒåˆ©ç”¨ã•ã‚Œã‚‹ã€‚

https://www.i18next.com/overview/configuration-options#languages-namespaces-resources

---

- https://github.com/jpomykala/awesome-i18n
- https://www.gala-global.org/knowledge-center/professional-development/articles/5-software-internationalization-i18n-best
- https://en.wikipedia.org/wiki/IETF_language_tag
