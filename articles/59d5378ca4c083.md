---
title: "Bettererとは何か"
emoji: "🔥"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["betterer"]
published: false
---

## はじめに

規模が大きいコードベースに対して、大きな変更をやり切るのが難しい状況というのは多々あると思う。
1度で終わらせるにも影響範囲が非常に広くなってリリースを安全に行うことが困難だったり、時間をかけて適用するにもその間の関係者との合意を維持し続けるコストが一定発生することになる。
このような問題を解決するための Betterer というツールがあるようなので、これがどのようなものかを確認してみる。

https://github.com/phenomnomnominal/betterer

https://youtu.be/y5Q4eXCpn20?si=X9sGSMHHBPgEIW_C


## プロジェクトへの追加

`npx @betterer/cli init`コマンドでプロジェクトに追加することができる。ここでは`pnpm dlx`で実行する。

```bash
❯ pnpm dlx @betterer/cli init
Downloading registry.npmjs.org/typescript/4.9.5: 11.62 MB/11.62 MB, done
Packages: +98
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Progress: resolved 98, reused 97, downloaded 1, added 98, done

   \ | /     _         _   _
 '-.ooo.-'  | |__  ___| |_| |_ ___ _ __ ___ _ __
---ooooo--- | '_ \/ _ \ __| __/ _ \ '__/ _ \ '__|
 .-'ooo'-.  | |_)|  __/ |_| ||  __/ | |  __/ |
   / | \    |_.__/\___|\__|\__\___|_|  \___|_|

🎉 Initialising Betterer (35ms): 2 tasks done!
✅ Create test file: done!
・ created "/path/to/project/.betterer.ts"!
✅ Update package.json: done!
・ added "betterer" script to package.json file.
・ added "@betterer/cli" dependency to package.json file
・ "typescript" dependency already exists, moving on...
```

コマンド実行した結果、以下のことが行われる。

- `@betterer/cli`が`devDependencies`として追加される
- npm scriptsとして`betterer`が追加される
- プロジェクトルートに`.betterer.ts`が生成される

`pnpm i`で追加された`@betteerer/cli`をインストールすると初期設定に必要なことは完了する。

```bash
❯ pnpm i
Packages: +56 -1
++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
Progress: resolved 297, reused 222, downloaded 41, added 56, done

devDependencies:
+ @betterer/cli 5.4.0

The dependency was already listed in devDependencies.
If you want to make it a prod dependency, then move it manually.

 WARN  Issues with peer dependencies found
.
└─┬ @betterer/cli 5.4.0
  └─┬ @phenomnomnominal/tsquery 4.2.0
    └── ✕ unmet peer typescript@"^3 || ^4": found 5.3.3
```

TypeScriptのv5を未サポートという状況のようで、`unmet peer`となる。

https://github.com/phenomnomnominal/betterer/issues/1131
